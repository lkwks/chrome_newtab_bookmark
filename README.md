## 개요

- 크롬에서 새탭을 열면 북마크바에 저장돼 있던 북마크를 한 행에 5개씩 출력하는 크롬 확장 프로그램.

- 폴더 기능 없이, 북마크 추가/삭제/수정 기능 없이, 드래그 기능 없이 제작했을 땐 매우 간단했으나, 이후 점차 기능을 추가하며 코드가 길어지고 구조가 복잡해졌다.

## 새로 알게 된 점

- favicon을 빈칸으로 만들 placeholder가 궁금해서 챗지피티에 물어보니, 1x1 png 파일, gif 파일의 base64 코드가 꽤 쓰인다는 걸 알게 됐다. (이 코드에서 쓰인 `R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7`는 1x1 gif 파일의 base64 코드.)

- hover시 엘리먼트의 스타일이 변경되도록 할 때 js를 쓰지 않고 CSS만으로도 구현히 가능하다는 걸 알게 됐다.

- 드래그 앤 드롭 구현 시 `replaceChild()` 메서드를 사용할 경우 드래그 중인 북마크 아이콘을 DOM에서 제거하지 않으면서 DOM 내 위치를 변경할 수 있다는 강력한 이점이 있어 이를 적극 활용했다.


- 드래그 시작했다가 아이콘을 내려놓으면 아이콘이 커서가 있는 위치에 바로 내려앉는 게 아니라 원래 위치로 돌아가는 현상이 있었는데, `dragover` 이벤트 리스너에서 `e.preventDefault()` 메서드를 호출하니 이 현상이 사라졌다. 또, 드래그 시작하면 커서가 `copy` 모양으로 변경되는 현상이 있었는데, 또 이 이벤트 리스너에서 `e.dataTransfer.dropEffect = "move";`라는 값 대입식을 쓰니 이 현상이 해결되었다. (둘 다 챗지피티에게 물어 알게 된 거고 원리는 잘 모르겠음.)


## 소감


- 드래그 & 드롭 기능의 경우 이를 제대로 구현할 수 있는 시나리오를 정하는 작업이 꽤 복잡해 제대로 구현하는 데 상당한 시간이 소요됐다. '북마크 아이콘 하나를 드래그 하기 시작할 때 그 엘리먼트의 DOM 내 위치는 그대로 둔다' 등 여러 시나리오를 두고 수시간 테스트 해본 결과 '북마크 아이콘 하나를 드래그할 때마다 메인 페이지 내 그 아이콘이 위치하는 cell을 항상 같이 움직인다'라는 시나리오가 직관적이면서도 구현하기 가장 쉽다는 판단을 내리게 되었다. 

  - 드래그 & 드롭에 사용한 이벤트 리스너는 `dragstart`, `dragover`, `dragenter`, `dragleave`, `dragend`였고 `dragover`, `drop`은 사용하지 않았다. 
  
  - 드래그 & 드롭을 구현한 사례 중 '북마크 아이콘 하나를 드래그 하기 시작할 때 그 엘리먼트의 DOM 내 위치는 그대로 둔다' 시나리오를 사용하는 구현 사례도 있던데, 어떤 게 더 직관적이고 더 나은 UI일까? 그대로 두는 게 중요해질 때는 언제일까? 내가 구현할 때에는 아이콘을 움직이기 시작하자 전체적인 아이콘 배치가 우루루 움직이는 대 혼돈이 일어나 이 시나리오를 구현하는 게 매우 곤란했고, 현재 방법이 더 직관적이란 생각이 들어 더 시간을 쓰지 않았는데, 이 시나리오를 채택한 사람들은 어떤 원칙으로 이를 채택했는지가 궁금.
  
  
- 폴더 기능을 구현하는 것을 전혀 염두에 두지 않고 개발을 진행해왔기에 이를 구현하려면 굉장히 많은 코드 수정이 필요할 것이라 예상했으나, 의외로 전혀 많은 시간이 걸리지 않았고 오히려 아주 사소한 몇가지 수정만으로 거의 오류 없이 매끄럽게 동작하도록 폴더 기능을 구현할 수 있어 스스로도 많이 놀랐었다. 이에 가장 도움이 된 것은 역시 `chrome.bookmarks` API의 폴더 기능 지원이 강력한 덕이겠지만, 이벤트 리스너 부분을 매끄럽게 구현했던 것이나 기능이 다르면 class도 달리해서 구현하도록 한 등 코드가 스파게티가 되지 않도록 잘 관리를 하면서 코딩을 해온 것이 큰 기여가 된 것 같다는 생각이 든다. 

- 원래 크롬 새탭 누르면 보이는 아이콘들을 눌러서 웹서핑을 해왔고 그걸로도 크게 불편하지 않아 북마크 기능을 사용하지 않았는데, 인턴 근무 시작 후 북마크 해둬야 할 링크가 갑자기 10개 이상 생겨서 '새탭 페이지에 북마크를 출력하면 좋지 않을까'라는 생각이 들어 개발을 시작한 게 제작 동기. 그런데 막상 개발하고 나니 내가 그동안 얼마나 많은 북마크를 등록해놓고 방치하고 있었는지를 깨닫게 되었고, 의외로 굉장히 강력한 북마크 관리 툴을 제작한 셈이 되어 이를 통해 내 북마크를 하나씩 정리해보게 되는 계기가 됐다. 결론적으로, '좋은 툴을 갖게 되면 그만큼 할 수 있는 게 많아지고 관심사도 달라지고 따라서 삶의 방식에도 많은 변화가 생길 수 있다'란 걸 느끼게 된 계기가 됐다.

- 그럼에도 불구하고 드래그 앤 드롭 관련해서는 오브젝트가 어디에 오버랩됐을 때 액션을 어떻게 처리하는지 등 문제가 굉장히 복잡한 측면이 있고, 아이콘 내부 코드도 너무 대충 복잡하게 만든 느낌이 있고 이게 전체적인 구현에 악영향을 주는 듯해, 이 부분에 집중해서 코드를 간소화하는 작업을 해야 하지 않나 하는 생각. 
